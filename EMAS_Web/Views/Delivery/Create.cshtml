<h1>Создаём доставку из @ViewBag.DepartureLocation.Item2</h1>

<input type="hidden" name="departureId" value="@ViewBag.DepartureLocation.Item1" />

@foreach (int item in ViewBag.SelectedIds)
{
    <input type="hidden" name="selectedIds" value="@item" />
    <p>@item</p>
}

@if (ViewBag.ObjectsInfo is not null)
{
    @foreach (string item in ViewBag.ObjectsInfo)
    {
        <p>@item</p>
    }
}

<script>
    function validateForm() {
        var comment = document.querySelector('input[name="comment"]').value;
        var dateTime = document.querySelector('input[name="dateTime"]').value;

        // Пример проверки: убедитесь, что комментарий не пустой и дата отправки выбрана
        if (!comment.trim()) {
            alert('Комментарий не может быть пустым.');
            return false; // Останавливает отправку формы
        }

        if (!dateTime) {
            alert('Дата отправки не выбрана.');
            return false; // Останавливает отправку формы
        }

        // Если валидация прошла успешно, форма отправится
        return true;
    }
</script>

<form method="post" onsubmit="return validateForm()">
    <div>
        @foreach (ValueTuple<int,string> location in ViewBag.Locations)
        {
            <input class="form-check-input" type="radio" name="destinationId" id="@location.Item2" value="@location.Item1">
            <label class="form-check-label" for="@location.Item2">
                @location.Item2
            </label>
        }
    </div>
    
    <div>
        <p>
            <label for="Comment">Комментарий</label><br />
            <input type="text" name="comment" />
        </p>
        <p>
            <label for="DateTime">Дата отправки</label><br />
            <input type="datetime-local" name="dateTime" />
        </p>
        <p>
            <input class="btn btn-success" type="submit" value="Создать доставку" />
        </p>
    </div>

    @if (ViewBag.Error != null)
    {
        @if (ViewBag.Error)
        {
            <div class="alert alert-danger" role="alert">
                @ViewBag.ErrorMessage
            </div>
        }
        else
        {
            <div class="alert alert-success" role="alert">
                Добавление успешно
            </div>
        }
    }
</form>